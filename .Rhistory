date <-unlist(strsplit(date,"\\/|-"))
date[2][1] <- sub("Jan","01", date[2][1])               # fix written months
date[2][1] <- sub("Feb","02", date[2][1])
date[2][1] <- sub("Mar","03", date[2][1])
date[2][1] <- sub("Apr","04", date[2][1])
date[2][1] <- sub("May","05", date[2][1])
date[2][1] <- sub("Jun","06", date[2][1])
date[2][1] <- sub("Jul","07", date[2][1])
date[2][1] <- sub("Aug","08", date[2][1])
date[2][1] <- sub("Sep","09", date[2][1])
date[2][1] <- sub("Oct","10", date[2][1])
date[2][1] <- sub("Nov","11", date[2][1])
date[2][1] <- sub("Dec","12", date[2][1])
if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
if (nchar(date[1][1])<2) stri_sub(date[1][1], 1, 0) <- 0 # padding
if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
if (nchar(date[2][1])>2) date[3][1] <- stri_sub(date[3][1], 3, 4)
date_new<-paste(date, collapse = '/')
print(date_new)
}
}
}
}
names(f_dates)
colnames(f_dates)
library(stringi)
new_m <- new_m[-which(is.na(new_m$round)), ]
new_m <- new_m[order(new_m$country),]
new_m <- new_m[order(new_m$round),]
f_dates<- new_m
date <- ""
for(j in grep(pattern="(^.*date$)|(^date.*$)", x=colnames(f_dates), value=TRUE)) {
print(j)
# for (col in which(colnames(f_dates)==j)) {
#   for (i in 1:(nrow(f_dates)-1)) {
#     if (!is.na(f_dates[i,col])) {
#       date <- as.character(f_dates[i,col])
#       date <-unlist(strsplit(date,"\\/|-"))
#       date[2][1] <- sub("Jan","01", date[2][1])               # fix written months
#       date[2][1] <- sub("Feb","02", date[2][1])
#       date[2][1] <- sub("Mar","03", date[2][1])
#       date[2][1] <- sub("Apr","04", date[2][1])
#       date[2][1] <- sub("May","05", date[2][1])
#       date[2][1] <- sub("Jun","06", date[2][1])
#       date[2][1] <- sub("Jul","07", date[2][1])
#       date[2][1] <- sub("Aug","08", date[2][1])
#       date[2][1] <- sub("Sep","09", date[2][1])
#       date[2][1] <- sub("Oct","10", date[2][1])
#       date[2][1] <- sub("Nov","11", date[2][1])
#       date[2][1] <- sub("Dec","12", date[2][1])
#       if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
#       if (nchar(date[1][1])<2) stri_sub(date[1][1], 1, 0) <- 0 # padding
#       if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
#       if (nchar(date[2][1])>2) date[3][1] <- stri_sub(date[3][1], 3, 4)
#       date_new<-paste(date, collapse = '/')
#       print(date_new)
#     }
#   }
# }
}
library(stringi)
new_m <- new_m[-which(is.na(new_m$round)), ]
new_m <- new_m[order(new_m$country),]
new_m <- new_m[order(new_m$round),]
f_dates<- new_m
date <- ""
for(j in grep(pattern="(^.*date$)|(^date.*$)", x=colnames(f_dates), value=TRUE)) {
for (col in which(colnames(f_dates)==j)) {
for (i in 1:(nrow(f_dates)-1)) {
if (!is.na(f_dates[i,col])) {
date <- as.character(f_dates[i,col])
date <-unlist(strsplit(date,"\\/|-"))
date[2][1] <- sub("Jan","01", date[2][1])               # fix written months
date[2][1] <- sub("Feb","02", date[2][1])
date[2][1] <- sub("Mar","03", date[2][1])
date[2][1] <- sub("Apr","04", date[2][1])
date[2][1] <- sub("May","05", date[2][1])
date[2][1] <- sub("Jun","06", date[2][1])
date[2][1] <- sub("Jul","07", date[2][1])
date[2][1] <- sub("Aug","08", date[2][1])
date[2][1] <- sub("Sep","09", date[2][1])
date[2][1] <- sub("Oct","10", date[2][1])
date[2][1] <- sub("Nov","11", date[2][1])
date[2][1] <- sub("Dec","12", date[2][1])
if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
if (nchar(date[1][1])<2) stri_sub(date[1][1], 1, 0) <- 0 # padding
if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
if (nchar(date[2][1])>2) date[3][1] <- stri_sub(date[3][1], 3, 4)
date_new<-paste(date, collapse = '/')
print(date_new)
}
}
}
}
for(j in grep(pattern="(^.*date$)|(^date.*$)", x=colnames(f_dates), value=TRUE)) {
for (col in which(colnames(f_dates)==j)) {
print(col)
#   for (i in 1:(nrow(f_dates)-1)) {
#     if (!is.na(f_dates[i,col])) {
#       date <- as.character(f_dates[i,col])
#       date <-unlist(strsplit(date,"\\/|-"))
#       date[2][1] <- sub("Jan","01", date[2][1])               # fix written months
#       date[2][1] <- sub("Feb","02", date[2][1])
#       date[2][1] <- sub("Mar","03", date[2][1])
#       date[2][1] <- sub("Apr","04", date[2][1])
#       date[2][1] <- sub("May","05", date[2][1])
#       date[2][1] <- sub("Jun","06", date[2][1])
#       date[2][1] <- sub("Jul","07", date[2][1])
#       date[2][1] <- sub("Aug","08", date[2][1])
#       date[2][1] <- sub("Sep","09", date[2][1])
#       date[2][1] <- sub("Oct","10", date[2][1])
#       date[2][1] <- sub("Nov","11", date[2][1])
#       date[2][1] <- sub("Dec","12", date[2][1])
#       if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
#       if (nchar(date[1][1])<2) stri_sub(date[1][1], 1, 0) <- 0 # padding
#       if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
#       if (nchar(date[2][1])>2) date[3][1] <- stri_sub(date[3][1], 3, 4)
#       date_new<-paste(date, collapse = '/')
#       print(date_new)
#     }
#   }
}
}
for(j in grep(pattern="(^.*date$)|(^date.*$)", x=colnames(f_dates), value=TRUE)) {
for (col in which(colnames(f_dates)==j)) {
for (i in 1:(nrow(f_dates)-1)) {
print(f_dates[i,col])
#   if (!is.na(f_dates[i,col])) {
#     date <- as.character(f_dates[i,col])
#     date <-unlist(strsplit(date,"\\/|-"))
#     date[2][1] <- sub("Jan","01", date[2][1])               # fix written months
#     date[2][1] <- sub("Feb","02", date[2][1])
#     date[2][1] <- sub("Mar","03", date[2][1])
#     date[2][1] <- sub("Apr","04", date[2][1])
#     date[2][1] <- sub("May","05", date[2][1])
#     date[2][1] <- sub("Jun","06", date[2][1])
#     date[2][1] <- sub("Jul","07", date[2][1])
#     date[2][1] <- sub("Aug","08", date[2][1])
#     date[2][1] <- sub("Sep","09", date[2][1])
#     date[2][1] <- sub("Oct","10", date[2][1])
#     date[2][1] <- sub("Nov","11", date[2][1])
#     date[2][1] <- sub("Dec","12", date[2][1])
#     if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
#     if (nchar(date[1][1])<2) stri_sub(date[1][1], 1, 0) <- 0 # padding
#     if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
#     if (nchar(date[2][1])>2) date[3][1] <- stri_sub(date[3][1], 3, 4)
#     date_new<-paste(date, collapse = '/')
#     print(date_new)
#   }
# }
}
}
}
library(stringi)
f_dates <- new_m[order(new_m$country),]
f_dates <- f_dates[order(f_dates$round),]
f_dates <- f_dates[-which(is.na(f_dates$round)), ]
prev_date <- ""
date <- ""
for(j in grep(pattern="(^.*date$)|(^date.*$)", x=colnames(f_dates), value=TRUE)) {
for (col in which(colnames(f_dates)==j)) {
for (i in 1:(nrow(f_dates)-1)) {
if (!is.na(f_dates[i,col])) {
date <- as.character(f_dates[i,col])
date <-unlist(strsplit(date,"\\/|-"))
date[2][1] <- sub("Jan","01", date[2][1]) # fix written months
date[2][1] <- sub("Feb","02", date[2][1])
date[2][1] <- sub("Mar","03", date[2][1])
date[2][1] <- sub("Apr","04", date[2][1])
date[2][1] <- sub("May","05", date[2][1])
date[2][1] <- sub("Jun","06", date[2][1])
date[2][1] <- sub("Jul","07", date[2][1])
date[2][1] <- sub("Aug","08", date[2][1])
date[2][1] <- sub("Sep","09", date[2][1])
date[2][1] <- sub("Oct","10", date[2][1])
date[2][1] <- sub("Nov","11", date[2][1])
date[2][1] <- sub("Dec","12", date[2][1])
if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
if (nchar(date[1][1])<2) stri_sub(date[1][1], 1, 0) <- 0
date_new<-paste(date, collapse = '/')
print(date_new)
}
}
}
}
drop f_dates
View(f_dates)
f_dates <- new_m[order(new_m$country),]
f_dates <- new_m
new_m <- m[ , -which(names(m) %in% c("X.1500", "column1"))]
new_m <- new_m[, -grep("^column", colnames(new_m))]
names <- names(new_m)
library(stringi)
new_m <- new_m[-which(is.na(new_m$round)), ]
new_m <- new_m[order(new_m$country),]
new_m <- new_m[order(new_m$round),]
f_dates<- new_m
date <- ""
for(j in grep(pattern="(^.*date$)|(^date.*$)", x=colnames(f_dates), value=TRUE)) {
for (col in which(colnames(f_dates)==j)) {
for (i in 1:(nrow(f_dates)-1)) {
print(f_dates[i,col])
if (!is.na(f_dates[i,col])) {
date <- as.character(f_dates[i,col])
date <-unlist(strsplit(date,"\\/|-"))
date[2][1] <- sub("Jan","01", date[2][1])               # fix written months
date[2][1] <- sub("Feb","02", date[2][1])
date[2][1] <- sub("Mar","03", date[2][1])
date[2][1] <- sub("Apr","04", date[2][1])
date[2][1] <- sub("May","05", date[2][1])
date[2][1] <- sub("Jun","06", date[2][1])
date[2][1] <- sub("Jul","07", date[2][1])
date[2][1] <- sub("Aug","08", date[2][1])
date[2][1] <- sub("Sep","09", date[2][1])
date[2][1] <- sub("Oct","10", date[2][1])
date[2][1] <- sub("Nov","11", date[2][1])
date[2][1] <- sub("Dec","12", date[2][1])
if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
if (nchar(date[1][1])<2) stri_sub(date[1][1], 1, 0) <- 0 # padding
if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
if (nchar(date[2][1])>2) date[3][1] <- stri_sub(date[3][1], 3, 4)
date_new<-paste(date, collapse = '/')
print(date_new)
}
}
}
}
library(stringi)
new_m <- new_m[-which(is.na(new_m$round)), ]
new_m <- new_m[order(new_m$country),]
new_m <- new_m[order(new_m$round),]
f_dates<- new_m
date <- ""
for(j in grep(pattern="(^.*date$)|(^date.*$)", x=colnames(f_dates), value=TRUE)) {
for (col in which(colnames(f_dates)==j)) {
for (i in 1:(nrow(f_dates)-1)) {
if (!is.na(f_dates[i,col])) {
date <- as.character(f_dates[i,col])
date <-unlist(strsplit(date,"\\/|-"))
date[2][1] <- sub("Jan","01", date[2][1])               # fix written months
date[2][1] <- sub("Feb","02", date[2][1])
date[2][1] <- sub("Mar","03", date[2][1])
date[2][1] <- sub("Apr","04", date[2][1])
date[2][1] <- sub("May","05", date[2][1])
date[2][1] <- sub("Jun","06", date[2][1])
date[2][1] <- sub("Jul","07", date[2][1])
date[2][1] <- sub("Aug","08", date[2][1])
date[2][1] <- sub("Sep","09", date[2][1])
date[2][1] <- sub("Oct","10", date[2][1])
date[2][1] <- sub("Nov","11", date[2][1])
date[2][1] <- sub("Dec","12", date[2][1])
if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
if (nchar(date[1][1])<2) stri_sub(date[1][1], 1, 0) <- 0 # padding
if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
if (nchar(date[2][1])>2) date[3][1] <- stri_sub(date[3][1], 3, 4)
date_new<-paste(date, collapse = '/')
print(date_new)
}
}
}
}
new_m <- m[ , -which(names(m) %in% c("X.1500", "column1"))]
new_m <- new_m[, -grep("^column", colnames(new_m))]
names <- names(new_m)
library(stringi)
new_m <- new_m[order(new_m$country),]
new_m <- new_m[order(new_m$round),]
f_dates<- new_m
date <- ""
for(j in grep(pattern="(^.*date$)|(^date.*$)", x=colnames(f_dates), value=TRUE)) {
for (col in which(colnames(f_dates)==j)) {
for (i in 1:(nrow(f_dates)-1)) {
if (!is.na(f_dates[i,col])) {
date <- as.character(f_dates[i,col])
date <-unlist(strsplit(date,"\\/|-"))
date[2][1] <- sub("Jan","01", date[2][1])               # fix written months
date[2][1] <- sub("Feb","02", date[2][1])
date[2][1] <- sub("Mar","03", date[2][1])
date[2][1] <- sub("Apr","04", date[2][1])
date[2][1] <- sub("May","05", date[2][1])
date[2][1] <- sub("Jun","06", date[2][1])
date[2][1] <- sub("Jul","07", date[2][1])
date[2][1] <- sub("Aug","08", date[2][1])
date[2][1] <- sub("Sep","09", date[2][1])
date[2][1] <- sub("Oct","10", date[2][1])
date[2][1] <- sub("Nov","11", date[2][1])
date[2][1] <- sub("Dec","12", date[2][1])
if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
if (nchar(date[1][1])<2) stri_sub(date[1][1], 1, 0) <- 0 # padding
if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
if (nchar(date[2][1])>2) date[3][1] <- stri_sub(date[3][1], 3, 4)
date_new<-paste(date, collapse = '/')
print(date_new)
}
}
}
}
for(j in grep(pattern="(^.*date$)|(^date.*$)", x=colnames(f_dates), value=TRUE)) {
for (col in which(colnames(f_dates)==j)) {
for (i in 1:(nrow(f_dates)-1)) {
if (!is.na(f_dates[i,col])) {
date <- as.character(f_dates[i,col])
date <-unlist(strsplit(date,"\\/|-"))
date[2][1] <- sub("Jan","01", date[2][1])               # fix written months
date[2][1] <- sub("Feb","02", date[2][1])
date[2][1] <- sub("Mar","03", date[2][1])
date[2][1] <- sub("Apr","04", date[2][1])
date[2][1] <- sub("May","05", date[2][1])
date[2][1] <- sub("Jun","06", date[2][1])
date[2][1] <- sub("Jul","07", date[2][1])
date[2][1] <- sub("Aug","08", date[2][1])
date[2][1] <- sub("Sep","09", date[2][1])
date[2][1] <- sub("Oct","10", date[2][1])
date[2][1] <- sub("Nov","11", date[2][1])
date[2][1] <- sub("Dec","12", date[2][1])
if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
if (nchar(date[1][1])<2) stri_sub(date[1][1], 1, 0) <- 0 # padding
if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
if (nchar(date[3][1])>2) date[3][1] <- stri_sub(date[3][1], 3, 4)
date_new<-paste(date, collapse = '/')
print(date_new)
}
}
}
}
library(stringi)
new_m <- new_m[order(new_m$country),]
new_m <- new_m[order(new_m$round),]
date <- ""
for(j in grep(pattern="(^.*date$)|(^date.*$)", x=colnames(new_m), value=TRUE)) {
for (col in which(colnames(new_m)==j)) {
for (i in 1:(nrow(new_m)-1)) {
if (!is.na(new_m[i,col])) {
date <- as.character(new_m[i,col])
date <-unlist(strsplit(date,"\\/|-"))
date[2][1] <- sub("Jan","01", date[2][1])               # fix written months
date[2][1] <- sub("Feb","02", date[2][1])
date[2][1] <- sub("Mar","03", date[2][1])
date[2][1] <- sub("Apr","04", date[2][1])
date[2][1] <- sub("May","05", date[2][1])
date[2][1] <- sub("Jun","06", date[2][1])
date[2][1] <- sub("Jul","07", date[2][1])
date[2][1] <- sub("Aug","08", date[2][1])
date[2][1] <- sub("Sep","09", date[2][1])
date[2][1] <- sub("Oct","10", date[2][1])
date[2][1] <- sub("Nov","11", date[2][1])
date[2][1] <- sub("Dec","12", date[2][1])
if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
if (nchar(date[1][1])<2) stri_sub(date[1][1], 1, 0) <- 0 # padding
if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
if (nchar(date[3][1])>2) date[3][1] <- stri_sub(date[3][1], 3, 4)
date_new<-paste(date, collapse = '/')
print(date_new)
new_m[i,col] <- date_new
}
}
}
}
View(new_m)
library(stringi)
new_m <- new_m[order(new_m$country),]
new_m <- new_m[order(new_m$round),]
round <- ""
prev_date <- [0,0]
for(j in grep(pattern="(^.*date$)|(^date.*$)", x=colnames(new_m), value=TRUE)) {
for (col in which(colnames(new_m)==j)) {
for (i in 1:(nrow(new_m)-1)) {
if (!is.na(new_m[i,col])) {
date <- as.character(new_m[i,col])
date <-unlist(strsplit(date,"\\/|-"))
date[2][1] <- sub("Jan","01", date[2][1])               # fix written months
date[2][1] <- sub("Feb","02", date[2][1])
date[2][1] <- sub("Mar","03", date[2][1])
date[2][1] <- sub("Apr","04", date[2][1])
date[2][1] <- sub("May","05", date[2][1])
date[2][1] <- sub("Jun","06", date[2][1])
date[2][1] <- sub("Jul","07", date[2][1])
date[2][1] <- sub("Aug","08", date[2][1])
date[2][1] <- sub("Sep","09", date[2][1])
date[2][1] <- sub("Oct","10", date[2][1])
date[2][1] <- sub("Nov","11", date[2][1])
date[2][1] <- sub("Dec","12", date[2][1])
if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
if (nchar(date[1][1])<2) stri_sub(date[1][1], 1, 0) <- 0 # padding
if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
if (nchar(date[3][1])>2) date[3][1] <- stri_sub(date[3][1], 3, 4)
if (new_m$round[i] == round) {
dm <- as.integer(date[1][1]) - as.integer(prev_date[1])
md <- as.integer(date[2][1]) - as.integer(prev_date[2])
if abs(dm) < abs(md) {
temp <- date[2][1]
date[1][1] <- date[2][1]
date[2][1] <- temp
}
}
if (as.integer(date[2][1] > 12)) {
temp <- date[2][1]
date[1][1] <- date[2][1]
date[2][1] <- temp
}
round <- new_m$round[i]
prev_date[1] <- date[1][1]
prev_date[2] <- date[2][1]
date_new<-paste(date, collapse = '/')
print(date_new)
new_m[i,col] <- date_new
}
}
}
}
library(stringi)
new_m <- new_m[order(new_m$country),]
new_m <- new_m[order(new_m$round),]
round <- ""
prev_date <- [0,0]
for(j in grep(pattern="(^.*date$)|(^date.*$)", x=colnames(new_m), value=TRUE)) {
for (col in which(colnames(new_m)==j)) {
for (i in 1:(nrow(new_m)-1)) {
if (!is.na(new_m[i,col])) {
date <- as.character(new_m[i,col])
date <-unlist(strsplit(date,"\\/|-"))
date[2][1] <- sub("Jan","01", date[2][1])               # fix written months
date[2][1] <- sub("Feb","02", date[2][1])
date[2][1] <- sub("Mar","03", date[2][1])
date[2][1] <- sub("Apr","04", date[2][1])
date[2][1] <- sub("May","05", date[2][1])
date[2][1] <- sub("Jun","06", date[2][1])
date[2][1] <- sub("Jul","07", date[2][1])
date[2][1] <- sub("Aug","08", date[2][1])
date[2][1] <- sub("Sep","09", date[2][1])
date[2][1] <- sub("Oct","10", date[2][1])
date[2][1] <- sub("Nov","11", date[2][1])
date[2][1] <- sub("Dec","12", date[2][1])
if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
if (nchar(date[1][1])<2) stri_sub(date[1][1], 1, 0) <- 0 # padding
if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
if (nchar(date[3][1])>2) date[3][1] <- stri_sub(date[3][1], 3, 4)
if (new_m$round[i] == round) {
dm <- as.integer(date[1][1]) - as.integer(prev_date[1])
md <- as.integer(date[2][1]) - as.integer(prev_date[2])
if abs(dm) < abs(md) {
temp <- date[2][1]
date[1][1] <- date[2][1]
date[2][1] <- temp
}
}
if (as.integer(date[2][1]) > 12) {
temp <- date[2][1]
date[1][1] <- date[2][1]
date[2][1] <- temp
}
round <- new_m$round[i]
prev_date[1] <- date[1][1]
prev_date[2] <- date[2][1]
date_new<-paste(date, collapse = '/')
print(date_new)
new_m[i,col] <- date_new
}
}
}
}
library(stringi)
new_m <- new_m[order(new_m$country),]
new_m <- new_m[order(new_m$round),]
round <- ""
prev_date <- [0,0]
for(j in grep(pattern="(^.*date$)|(^date.*$)", x=colnames(new_m), value=TRUE)) {
for (col in which(colnames(new_m)==j)) {
for (i in 1:(nrow(new_m)-1)) {
if (!is.na(new_m[i,col])) {
date <- as.character(new_m[i,col])
date <-unlist(strsplit(date,"\\/|-"))
date[2][1] <- sub("Jan","01", date[2][1])               # fix written months
date[2][1] <- sub("Feb","02", date[2][1])
date[2][1] <- sub("Mar","03", date[2][1])
date[2][1] <- sub("Apr","04", date[2][1])
date[2][1] <- sub("May","05", date[2][1])
date[2][1] <- sub("Jun","06", date[2][1])
date[2][1] <- sub("Jul","07", date[2][1])
date[2][1] <- sub("Aug","08", date[2][1])
date[2][1] <- sub("Sep","09", date[2][1])
date[2][1] <- sub("Oct","10", date[2][1])
date[2][1] <- sub("Nov","11", date[2][1])
date[2][1] <- sub("Dec","12", date[2][1])
if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
if (nchar(date[1][1])<2) stri_sub(date[1][1], 1, 0) <- 0 # padding
if (nchar(date[2][1])<2) stri_sub(date[2][1], 1, 0) <- 0 # padding
if (nchar(date[3][1])>2) date[3][1] <- stri_sub(date[3][1], 3, 4)
if (new_m$round[i] == round) {
dm <- as.integer(date[1][1]) - as.integer(prev_date[1])
md <- as.integer(date[2][1]) - as.integer(prev_date[2])
if (abs(dm) < abs(md)) {
temp <- date[2][1]
date[1][1] <- date[2][1]
date[2][1] <- temp
}
}
if (as.integer(date[2][1]) > 12) {
temp <- date[2][1]
date[1][1] <- date[2][1]
date[2][1] <- temp
}
round <- new_m$round[i]
prev_date[1] <- date[1][1]
prev_date[2] <- date[2][1]
date_new<-paste(date, collapse = '/')
print(date_new)
new_m[i,col] <- date_new
}
}
}
}
